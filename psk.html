<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Data Tabel</title>
    <script src="DW.js"></script> <!-- Pastikan DW.js sudah ada -->
</head>
<body>
    <h1>Unggah Data JSON untuk Tabel Plastik</h1>

    <div id="upload-container">
        <input type="file" id="fileInput" accept=".json">
        <button onclick="handleFileUpload()">Unggah Data</button>
    </div>

    <script>
        function handleFileUpload() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];

            if (!file) {
                alert("Silakan pilih file JSON terlebih dahulu.");
                return;
            }

            const reader = new FileReader();
            reader.onload = function(event) {
                const jsonData = event.target.result;
                try {
                    const parsedData = JSON.parse(jsonData);
                    loadTableData(parsedData);
                    alert("Data berhasil diunggah dan dimuat.");
                } catch (error) {
                    alert("Terjadi kesalahan saat memuat file. Pastikan format JSON benar.");
                }
            };
            reader.readAsText(file);
        }

        function loadTableData(data) {
            // Pastikan data yang dimuat sesuai dengan struktur default
            if (!Array.isArray(data)) {
                alert("Format data tidak sesuai.");
                return;
            }

            // Set data baru ke PlastikDB dan muat ulang tabel
            PlastikDB.defaultData = data;
            PlastikDB.loadTableFromHtml();
        }
    </script>
</body>
</html>
